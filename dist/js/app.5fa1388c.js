(function(){"use strict";var t={8009:function(t,e,a){var s=a(9242),n=a(3396);const o={id:"app"};function r(t,e,a,s,r,i){const c=(0,n.up)("router-view");return(0,n.wg)(),(0,n.iD)("div",o,[(0,n.Wm)(c)])}var i={name:"App"},c=a(89);const l=(0,c.Z)(i,[["render",r]]);var u=l,h=a(2483);const d={class:"content-container"};function g(t,e,a,s,o,r){const i=(0,n.up)("MainSidebar"),c=(0,n.up)("Navigation"),l=(0,n.up)("ChatBox");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(i),(0,n._)("div",d,[(0,n.Wm)(c),(0,n.Wm)(l)])])}const f=t=>((0,n.dD)("data-v-34d9d30d"),t=t(),(0,n.Cn)(),t),p={class:"main-sidebar"},m=(0,n.uE)('<nav class="sidebar-queries" data-v-34d9d30d><nav class="sidebar-menu" data-v-34d9d30d><ul data-v-34d9d30d><li data-v-34d9d30d><a href="#" data-v-34d9d30d>+ New chat</a></li></ul><ul class="queries" data-v-34d9d30d> fetch all the queries from an array </ul></nav></nav><div class="sidebar-divider" data-v-34d9d30d></div>',2),v={class:"sidebar-menu"},b=f((()=>(0,n._)("li",null,[(0,n._)("a",{href:"#"},"Upgrade to Plus")],-1))),_=f((()=>(0,n._)("li",null,[(0,n._)("a",{href:"#"},"Light mode/Dark mode")],-1))),w=f((()=>(0,n._)("li",null,[(0,n._)("a",{href:"#"},"Updates & FAQ")],-1))),x=f((()=>(0,n._)("i",{class:"fas fa-sign-out-alt"},null,-1)));function y(t,e,a,s,o,r){return(0,n.wg)(),(0,n.iD)("div",p,[m,(0,n._)("nav",v,[(0,n._)("ul",null,[b,_,w,(0,n._)("li",null,[(0,n._)("a",{href:"#",onClick:e[0]||(e[0]=(...t)=>r.logout&&r.logout(...t))},[x,(0,n.Uk)("Â Logout ")])])])])])}a(7658);var M={name:"MainSidebar",methods:{toggleMode(){this.isDarkMode=!this.isDarkMode,this.mode=this.isDarkMode?"Dark":"Light"},logout(){this.$router.push("/login")}}};const C=(0,c.Z)(M,[["render",y],["__scopeId","data-v-34d9d30d"]]);var k=C;const S={class:"chatbox-container"},T={class:"chatbox-input"},U={class:"chatbox-input-field-container"},A=["disabled"],D=(0,n._)("i",{class:"fas fa-paper-plane chatbox-send-icon"},null,-1),O=[D],$=(0,n._)("p",{class:"chatbox-input-paragraph"}," ChatGPT Feb 13 Version. Free Research Preview. Our goal is to make AI systems more natural and safe to interact with. Your feedback will help us improve. ",-1);function B(t,e,a,o,r,i){const c=(0,n.up)("ChatMessages");return(0,n.wg)(),(0,n.iD)("div",S,[(0,n.Wm)(c,{chatMessages:r.chatMessages,ref:t.chatContainer},null,8,["chatMessages"]),(0,n._)("div",T,[(0,n._)("form",{onSubmit:e[2]||(e[2]=(0,s.iM)(((...e)=>t.sendMessage&&t.sendMessage(...e)),["prevent"]))},[(0,n._)("div",U,[(0,n.wy)((0,n._)("input",{type:"text",class:"chatbox-input-field","onUpdate:modelValue":e[0]||(e[0]=t=>r.newMessage=t)},null,512),[[s.nr,r.newMessage]]),(0,n._)("button",{disabled:r.sending,class:"chatbox-send-button",onClick:e[1]||(e[1]=(...t)=>i.handleSubmit&&i.handleSubmit(...t))},O,8,A)]),$],32)])])}var I=a(4161);const q="http://localhost:3010";async function P(t){try{let e={user:t};const a=await I.Z.post(`${q}/query/fetch`,e);let s=[];return a.data.data.map((t=>{t.query_text&&s.push({message:t.query_text,isUser:!0}),t.answer_text&&s.push({message:t.answer_text,isUser:!1})})),s}catch(e){return console.error(e),[]}}async function j(t,e){try{let a={user:e,text:t};console.log(a);const s=await I.Z.post(`${q}/query`,a);let n={message:s.data.data.answer_text,isUser:!1};return n}catch(a){return console.error(a),[]}}async function Z(){try{const t=await I.Z.get(`${q}/user-token`);return t.data.data}catch(t){return console.error(t),[]}}var E=a(7139);const W=t=>((0,n.dD)("data-v-7a1932a8"),t=t(),(0,n.Cn)(),t),L={class:"chatbox-messages",ref:"chatContainer"},R={class:"chatbox-message-icon"},F=["src"],H={class:"chatbox-message-text"},z=W((()=>(0,n._)("div",{class:"chatbox-clearfix"},null,-1)));function N(t,e,a,s,o,r){return(0,n.wg)(),(0,n.iD)("div",L,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.chatMessages,((t,e)=>((0,n.wg)(),(0,n.iD)("div",{key:e,class:(0,E.C_)(t.isUser?"chatbox-message user-message":"chatbox-message bot-message")},[(0,n._)("div",R,[(0,n._)("img",{src:t.isUser?r.getUserAvatar():r.getBotAvatar(t.sender)},null,8,F)]),(0,n._)("div",H,[(0,n._)("p",null,(0,E.zw)(t.message),1)])],2)))),128)),z],512)}var V={name:"ChatMessages",props:{chatMessages:{type:Array,required:!0}},mounted(){this.scrollToBottom()},updated(){this.scrollToBottom()},methods:{getInitials(t){const e=t.split(" ");let a="";return e.forEach((t=>{a+=t.charAt(0)})),a.toUpperCase()},getUserAvatar(){const t="Uzair",e=this.getInitials(t),a="#007aff",s="#fff",n=document.createElement("canvas");n.width=40,n.height=40;const o=n.getContext("2d");return o.fillStyle=a,o.fillRect(0,0,n.width,n.height),o.fillStyle=s,o.font="20px Arial",o.textAlign="center",o.fillText(e,n.width/2,n.height/2+6),n.toDataURL()},getBotAvatar(t){t="Bot";const e=t.charAt(0).toUpperCase(),a="#bdbdbd",s="#333",n=document.createElement("canvas");n.width=40,n.height=40;const o=n.getContext("2d");return o.fillStyle=a,o.fillRect(0,0,n.width,n.height),o.fillStyle=s,o.font="20px Arial",o.textAlign="center",o.fillText(e,n.width/2,n.height/2+6),n.toDataURL()},scrollToBottom(){this.$nextTick((()=>{this.$refs.chatContainer.scrollTo({top:this.$refs.chatContainer.scrollHeight,behavior:"smooth"})}))}}};const Y=(0,c.Z)(V,[["render",N],["__scopeId","data-v-7a1932a8"]]);var G=Y,K={name:"ChatBox",components:{ChatMessages:G},data(){return{input:"",chatMessages:[],newMessage:"",sending:!1}},async created(){let t=localStorage.getItem("user_token");console.log(t);const e=await P(t);console.log(e),this.chatMessages=e,this.$nextTick((()=>{this.$refs.chatContainer.scrollTo({top:this.$refs.chatContainer.scrollHeight,behavior:"smooth"})}))},methods:{async handleSubmit(){this.sending=!0;const t=this.newMessage;this.chatMessages.push({message:t,isUser:!0}),this.newMessage="";const e=localStorage.getItem("user_token");this.chatMessages.push({message:"Waiting for response...",isUser:!1}),this.scrollToBottom();const a=await j(t,e);this.chatMessages[this.chatMessages.length-1].message="";const s=a.message.split("");let n=0;const o=setInterval((()=>{this.chatMessages[this.chatMessages.length-1].message+=s[n],this.scrollToBottom(),n++,n>=s.length&&clearInterval(o)}),50);this.sending=!1},scrollToBottom(){this.$nextTick((()=>{this.$refs.chatContainer.scrollTo({top:this.$refs.chatContainer.scrollHeight,behavior:"smooth"})}))}}};const Q=(0,c.Z)(K,[["render",B]]);var J=Q,X={name:"MainPage",components:{MainSidebar:k,ChatBox:J},async created(){let t=localStorage.getItem("user_token");if(!t){const e=await Z(t);localStorage.setItem("user_token",e)}}};const tt=(0,c.Z)(X,[["render",g]]);var et=tt;const at=[{path:"/",name:"Main",component:et,meta:{requiresAuth:!0}},{path:"/:catchAll(.*)",redirect:"/"}],st=(0,h.p7)({history:(0,h.PO)(),routes:at});st.beforeEach(((t,e,a)=>{const s=!0;t.meta.requiresAuth&&!s?a("/login"):a()}));var nt=st;a(5654);(0,s.ri)(u).use(nt).mount("#app")}},e={};function a(s){var n=e[s];if(void 0!==n)return n.exports;var o=e[s]={exports:{}};return t[s].call(o.exports,o,o.exports,a),o.exports}a.m=t,function(){var t=[];a.O=function(e,s,n,o){if(!s){var r=1/0;for(u=0;u<t.length;u++){s=t[u][0],n=t[u][1],o=t[u][2];for(var i=!0,c=0;c<s.length;c++)(!1&o||r>=o)&&Object.keys(a.O).every((function(t){return a.O[t](s[c])}))?s.splice(c--,1):(i=!1,o<r&&(r=o));if(i){t.splice(u--,1);var l=n();void 0!==l&&(e=l)}}return e}o=o||0;for(var u=t.length;u>0&&t[u-1][2]>o;u--)t[u]=t[u-1];t[u]=[s,n,o]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,s){var n,o,r=s[0],i=s[1],c=s[2],l=0;if(r.some((function(e){return 0!==t[e]}))){for(n in i)a.o(i,n)&&(a.m[n]=i[n]);if(c)var u=c(a)}for(e&&e(s);l<r.length;l++)o=r[l],a.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return a.O(u)},s=self["webpackChunkchat_bot_frontend"]=self["webpackChunkchat_bot_frontend"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(8009)}));s=a.O(s)})();
//# sourceMappingURL=app.5fa1388c.js.map